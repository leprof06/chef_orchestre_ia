<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Select or Import Project â€“ Orchestrator AI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/choose_project.css') }}">
</head>
<body>
    <div class="container">
        <h1>Open or Import a Project <span style="font-size:1.1em;">ðŸ“‚</span></h1>
        <div class="subtitle">Select a source to import or open your project.</div>

        <div class="import-sources">

            <!-- Local folder import via browser file explorer -->
            <form method="POST" action="{{ url_for('import_project_from_local_folder') }}" enctype="multipart/form-data" style="margin-top:1em;">
                <label for="folderInput"><strong>Import local folder:</strong></label><br>
                <input id="folderInput" name="folder" type="file" webkitdirectory directory multiple required>
                <button type="submit" class="btn-main" style="margin-top:0.5em;">Import Folder</button>
                <span style="font-size:0.93em;color:#678;">(All files and subfolders will be imported)</span>
            </form>

            <!-- Import ZIP -->
            <form action="{{ url_for('upload_projet_existant') }}" method="post" enctype="multipart/form-data">
                <label>Import project ZIP:</label>
                <input type="file" name="project_zip" accept=".zip" required>
                <button type="submit" class="btn-main">Import ZIP</button>
            </form>

            <!-- Import local folder by path (legacy, manual entry) -->
            <form action="{{ url_for('import_project_from_local_folder') }}" method="post">
                <label>Import local folder (manual path):</label>
                <input type="text" name="folder_path" placeholder="Full folder path (e.g. C:/Users/xxx/myproject)" required>
                <button type="submit" class="btn-main">Import Local (Path)</button>
            </form>

            <!-- Import GitHub -->
            <form action="{{ url_for('import_project_from_github') }}" method="post">
                <label>Import from GitHub:</label>
                <input type="text" name="github_url" placeholder="GitHub repo URL" required>
                <input type="text" name="token" placeholder="API Token (optional)">
                <button type="submit" class="btn-main">Import GitHub</button>
            </form>

            <!-- Import Google Drive -->
            <form action="{{ url_for('import_project_from_gdrive') }}" method="post">
                <label>Import from Google Drive:</label>
                <input type="text" name="gdrive_id" placeholder="Google Drive file/folder ID" required>
                <input type="text" name="token" placeholder="Google Drive API token">
                <button type="submit" class="btn-main">Import Google Drive</button>
            </form>

            <!-- Import Dropbox -->
            <form action="{{ url_for('import_project_from_dropbox') }}" method="post">
                <label>Import from Dropbox:</label>
                <input type="text" name="dropbox_link" placeholder="Dropbox share link" required>
                <input type="text" name="token" placeholder="Dropbox API token">
                <button type="submit" class="btn-main">Import Dropbox</button>
            </form>

            <!-- Import iCloud -->
            <form action="{{ url_for('import_project_from_icloud') }}" method="post">
                <label>Import from iCloud:</label>
                <input type="text" name="icloud_url" placeholder="iCloud link or ID" required>
                <input type="text" name="token" placeholder="iCloud API token (if needed)">
                <button type="submit" class="btn-main" disabled title="Not supported">Import iCloud</button>
            </form>

            <!-- Import AWS S3 -->
            <form action="{{ url_for('import_project_from_s3') }}" method="post">
                <label>Import from AWS S3:</label>
                <input type="text" name="s3_url" placeholder="S3 URL" required>
                <input type="text" name="aws_access_key" placeholder="AWS Access Key">
                <input type="text" name="aws_secret_key" placeholder="AWS Secret Key">
                <button type="submit" class="btn-main">Import S3</button>
            </form>

            <!-- Import HTTP/URL -->
            <form action="{{ url_for('import_project_from_http') }}" method="post">
                <label>Import from HTTP/HTTPS URL:</label>
                <input type="text" name="http_url" placeholder="https://url/to/file.zip" required>
                <button type="submit" class="btn-main">Import from URL</button>
            </form>

            <!-- Import FTP -->
            <form action="{{ url_for('import_project_from_ftp') }}" method="post">
                <label>Import from FTP:</label>
                <input type="text" name="ftp_url" placeholder="ftp://..." required>
                <input type="text" name="ftp_user" placeholder="Username (optional)">
                <input type="password" name="ftp_pass" placeholder="Password (optional)">
                <button type="submit" class="btn-main">Import FTP</button>
            </form>

            <!-- Import SVN -->
            <form action="{{ url_for('import_project_from_svn') }}" method="post">
                <label>Import from SVN:</label>
                <input type="text" name="svn_url" placeholder="SVN repository URL" required>
                <button type="submit" class="btn-main">Import SVN</button>
            </form>

            <!-- Import Bitbucket -->
            <form action="{{ url_for('import_project_from_bitbucket') }}" method="post">
                <label>Import from Bitbucket:</label>
                <input type="text" name="bitbucket_url" placeholder="Bitbucket repo URL" required>
                <input type="text" name="token" placeholder="Bitbucket API token (optional)">
                <button type="submit" class="btn-main">Import Bitbucket</button>
            </form>

            <!-- Import GitLab -->
            <form action="{{ url_for('import_project_from_gitlab') }}" method="post">
                <label>Import from GitLab:</label>
                <input type="text" name="gitlab_url" placeholder="GitLab repo URL" required>
                <input type="text" name="token" placeholder="GitLab API token (optional)">
                <button type="submit" class="btn-main">Import GitLab</button>
            </form>
        </div>

        <div class="sep"></div>

        <!-- List of already imported/local projects -->
        <div class="project-list">
            <div class="projets-titre">Your existing projects:</div>
            {% if projects %}
                {% for project in projects %}
                    <form action="{{ url_for('load_project', project_name=project) }}" method="get" style="display:inline;">
                        <button class="project-btn" type="submit">{{ project }}</button>
                    </form>
                {% endfor %}
            {% else %}
                <div>No project found.</div>
            {% endif %}
        </div>
        <div class="footer">
            <small>
                Made by Yann & GPT-CodeAssistant.<br>
                Modular Orchestrator AI â€¢ 2025
            </small>
        </div>
    </div>
</body>
</html>
