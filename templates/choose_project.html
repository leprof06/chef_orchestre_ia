<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Choisir ou importer un projet - Chef d'Orchestre IA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html, body { min-height: 100vh; margin: 0; padding: 0; font-family: 'Segoe UI', Arial, sans-serif; background: linear-gradient(110deg, #f5f7fa 0%, #c3cfe2 100%);}
        .container { max-width: 640px; margin: 7vh auto 0 auto; background: #fff; border-radius: 18px; box-shadow: 0 6px 32px rgba(70,100,200,0.12); padding: 3rem 2.5rem 2rem 2.5rem; text-align: center;}
        h1 { font-size: 2rem; margin-bottom: 0.7em; color: #253e67; font-weight: 600;}
        .subtitle { color: #6074a8; font-size: 1.05rem; margin-bottom: 2em;}
        .import-sources { display: flex; flex-direction: column; gap: 1.1em; margin-top: 1.7em; }
        form { background: #f7f8fd; padding: 0.9em 1em 1.2em 1em; border-radius: 10px; box-shadow: 0 1px 6px rgba(60,80,150,0.06); margin-bottom: 0.4em; text-align: left; }
        label { display: block; font-weight: 500; color: #34476e; margin-bottom: 0.3em; }
        input[type="file"], input[type="text"], input[type="password"] { width: 96%; padding: 0.45em; border: 1px solid #c9d3ea; border-radius: 8px; margin-bottom: 0.4em; }
        .btn-main { font-size: 1.09rem; font-weight: 500; border: none; outline: none; border-radius: 12px; padding: 0.68em 0; width: 100%; cursor: pointer; background: linear-gradient(90deg, #355C7D 0%, #6C5B7B 100%); color: #fff; transition: background 0.23s; box-shadow: 0 2px 12px rgba(60,80,150,0.06);}
        .btn-main:hover:enabled { background: linear-gradient(90deg, #6C5B7B 0%, #355C7D 100%);}
        .btn-main[disabled] { background: #bfc6da; cursor: not-allowed; opacity: 0.65; }
        .project-list { margin: 2.5em 0 1.7em 0; }
        .footer { margin-top: 2.3em; color: #889; font-size: 0.95em;}
        .sep {margin: 1.7em auto; border-bottom: 2px dashed #dae2f1; width: 80%;}
        .projets-titre {color: #26345a; font-size: 1.08rem; margin-bottom: 0.5em; font-weight: bold;}
        .project-btn { background: linear-gradient(90deg, #1cb5e0 0%, #000851 100%); color: #fff; border-radius: 9px; padding: 0.6em 1.2em; font-size: 1.03rem; margin: 0.22em 0.2em; border:none; cursor:pointer;}
        .project-btn:hover { background: linear-gradient(90deg, #000851 0%, #1cb5e0 100%);}
    </style>
</head>
<body>
    <div class="container">
        <h1>Ouvrir un projet existant <span style="font-size:1.1em;">ðŸ“‚</span></h1>
        <div class="subtitle">SÃ©lectionne une source pour importer ou ouvrir ton projet.</div>

        <div class="import-sources">
    <!-- === Import dâ€™un dossier local (NOUVEAU) === -->
    <form method="POST" action="{{ url_for('import_local_folder') }}" enctype="multipart/form-data" style="margin-top:1em;">
        <label for="folderInput"><strong>Importer un dossier localâ€¯:</strong></label><br>
        <input id="folderInput" name="folder" type="file" webkitdirectory directory multiple required>
        <button type="submit" class="btn-main" style="margin-top:0.5em;">Importer ce dossier</button>
        <span style="font-size:0.93em;color:#678;">(Tous les fichiers et sous-dossiers seront importÃ©s)</span>
    </form>


            <!-- Import ZIP -->
            <form action="{{ url_for('upload_projet_existant') }}" method="post" enctype="multipart/form-data">
                <label>TÃ©lÃ©charger un projet ZIP :</label>
                <input type="file" name="project_zip" accept=".zip" required>
                <button type="submit" class="btn-main">Importer ZIP</button>
            </form>

            <!-- Import dossier local -->
            <form action="{{ url_for('import_local') }}" method="post">
                <label>Importer un dossier local :</label>
                <input type="text" name="folder_path" placeholder="Chemin complet du dossier (ex: C:/Users/xxx/monprojet)" required>
                <button type="submit" class="btn-main">Importer Local</button>
            </form>

            <!-- Import GitHub -->
            <form action="{{ url_for('import_github') }}" method="post">
                <label>Importer depuis GitHub :</label>
                <input type="text" name="github_url" placeholder="URL du repo GitHub" required>
                <input type="text" name="token" placeholder="ClÃ© API (optionnel)">
                <button type="submit" class="btn-main" {% if github_token is not defined or not github_token %}disabled{% endif %}>Importer GitHub</button>
            </form>

            <!-- Import Google Drive -->
            <form action="{{ url_for('import_gdrive') }}" method="post">
                <label>Importer depuis Google Drive :</label>
                <input type="text" name="gdrive_id" placeholder="ID fichier/dossier Drive" required>
                <input type="text" name="token" placeholder="ClÃ© API Google Drive">
                <button type="submit" class="btn-main" {% if gdrive_token is not defined or not gdrive_token %}disabled{% endif %}>Importer Google Drive</button>
            </form>

            <!-- Import Dropbox -->
            <form action="{{ url_for('import_dropbox') }}" method="post">
                <label>Importer depuis Dropbox :</label>
                <input type="text" name="dropbox_link" placeholder="Lien partage Dropbox" required>
                <input type="text" name="token" placeholder="ClÃ© API Dropbox">
                <button type="submit" class="btn-main" {% if dropbox_token is not defined or not dropbox_token %}disabled{% endif %}>Importer Dropbox</button>
            </form>

            <!-- Import iCloud -->
            <form action="{{ url_for('import_icloud') }}" method="post">
                <label>Importer depuis iCloud :</label>
                <input type="text" name="icloud_url" placeholder="Lien iCloud ou identifiant" required>
                <input type="text" name="token" placeholder="ClÃ© API iCloud (si besoin)">
                <button type="submit" class="btn-main" disabled title="Non supportÃ© par dÃ©faut">Importer iCloud</button>
            </form>

            <!-- Import AWS S3 -->
            <form action="{{ url_for('import_s3') }}" method="post">
                <label>Importer depuis AWS S3 :</label>
                <input type="text" name="s3_url" placeholder="URL S3" required>
                <input type="text" name="aws_access_key" placeholder="AWS Access Key">
                <input type="text" name="aws_secret_key" placeholder="AWS Secret Key">
                <button type="submit" class="btn-main" {% if s3_key is not defined or not s3_key or s3_secret is not defined or not s3_secret %}disabled{% endif %}>Importer S3</button>
            </form>

            <!-- Import HTTP/URL direct -->
            <form action="{{ url_for('import_http') }}" method="post">
                <label>Importer via une URL HTTP/HTTPS :</label>
                <input type="text" name="http_url" placeholder="https://url/du/fichier.zip" required>
                <button type="submit" class="btn-main">Importer via URL</button>
            </form>

            <!-- Import FTP -->
            <form action="{{ url_for('import_ftp') }}" method="post">
                <label>Importer depuis FTP :</label>
                <input type="text" name="ftp_url" placeholder="ftp://..." required>
                <input type="text" name="ftp_user" placeholder="Utilisateur (optionnel)">
                <input type="password" name="ftp_pass" placeholder="Mot de passe (optionnel)">
                <button type="submit" class="btn-main">Importer FTP</button>
            </form>

            <!-- Import SVN -->
            <form action="{{ url_for('import_svn') }}" method="post">
                <label>Importer depuis SVN :</label>
                <input type="text" name="svn_url" placeholder="URL du dÃ©pÃ´t SVN" required>
                <button type="submit" class="btn-main">Importer SVN</button>
            </form>

            <!-- Import Bitbucket -->
            <form action="{{ url_for('import_bitbucket') }}" method="post">
                <label>Importer depuis Bitbucket :</label>
                <input type="text" name="bitbucket_url" placeholder="URL du repo Bitbucket" required>
                <input type="text" name="token" placeholder="ClÃ© API Bitbucket (optionnel)">
                <button type="submit" class="btn-main" {% if bitbucket_token is not defined or not bitbucket_token %}disabled{% endif %}>Importer Bitbucket</button>
            </form>

            <!-- Import GitLab -->
            <form action="{{ url_for('import_gitlab') }}" method="post">
                <label>Importer depuis GitLab :</label>
                <input type="text" name="gitlab_url" placeholder="URL du repo GitLab" required>
                <input type="text" name="token" placeholder="ClÃ© API GitLab (optionnel)">
                <button type="submit" class="btn-main" {% if gitlab_token is not defined or not gitlab_token %}disabled{% endif %}>Importer GitLab</button>
            </form>
        </div>

        <div class="sep"></div>

        <!-- Liste des projets dÃ©jÃ  importÃ©s/local -->
        <div class="project-list">
            <div class="projets-titre">Mes projets dÃ©jÃ  prÃ©sents :</div>
            {% if projects %}
                {% for project in projects %}
                    <form action="{{ url_for('load_project', project_name=project) }}" method="get" style="display:inline;">
                        <button class="project-btn" type="submit">{{ project }}</button>
                    </form>
                {% endfor %}
            {% else %}
                <div>Aucun projet pour lâ€™instant.</div>
            {% endif %}
        </div>
        <div class="footer">
            <small>
                Made by Yann & GPT-CodeAssistant.<br>
                IA orchestrateur modulaire â€¢ 2025
            </small>
        </div>
    </div>
</body>
</html>

        </div>
        <div class="footer">
            <small>
                Made by Yann & GPT-CodeAssistant.<br>
                IA orchestrateur modulaire â€¢ 2024
            </small>
        </div>
    </div>
</body>
</html>
